# 共通レイヤー学習ガイド: 01. database/client.py

このドキュメントでは、`homebiyori_common`レイヤーに含まれる、`database/client.py`の役割と実装について解説します。

## `DynamoDBClient`クラスの役割

このクラスは、プロジェクト内のすべてのバックエンドサービスから利用される、**DynamoDBとの通信を統一的に管理する**ための共通部品（クライアント）です。

### 主な責務

1.  **接続管理**: `boto3`を使い、DynamoDBへの接続を確立・管理します。
2.  **操作の抽象化**: 低レベルな`boto3`の操作をラップし、`get_item`, `put_item`, `query`といった、より直感的で使いやすいメソッドを提供します。
3.  **非同期処理**: `asyncio`と連携し、データベース操作を非同期で行うことで、Lambda関数の実行をブロックしない効率的なI/Oを実現します。
4.  **エラーハンドリングの統一**: `boto3`が返す様々な例外を捕捉し、プロジェクトで定義された独自の例外クラス（`DatabaseError`など）に変換して再送出します。これにより、各サービスでのエラー処理の記述を統一・簡素化します。
5.  **データ形式の変換**: Pythonのデータ型（`dict`, `Decimal`など）と、DynamoDBが要求する独自のJSON形式との間の相互変換（シリアライズ・デシリアライズ）を自動的に行います。

この共通クライアントが存在することで、各サービス（`user_service`など）の開発者は、DynamoDBとの通信に関する複雑な「お作法」を意識することなく、ビジネスロジックの実装に集中できます。
