# バックエンド学習ガイド

このドキュメントは、`homebiyori`プロジェクトのバックエンドサービスを理解するための学習ロードマップです。
各サービスの役割、コード量、難易度を整理し、学習の目安を示します。

難易度の低いものから順にステップアップしていくことで、段階的に全体のアーキテクチャを理解できるよう設計されています。

---

## バックエンドサービス 学習ロードマップ（難易度順）

以下に、理解しやすいと思われる順に各サービスを並べました。★の数が多いほど、複雑で理解に時間がかかる可能性を示します。

### 【ステップ1】 基本的なサービス (学習目安: 各1〜2時間)

まずは、単機能でシンプルなサービスから理解するのがおすすめです。

1.  **`health_check_service`** (難易度: ★☆☆☆☆)
    *   **役割**: API全体の死活監視。最もシンプル。
    *   **コード量**: 小
    *   **学習ポイント**: FastAPIの基本構造とLambda連携の基礎を学ぶのに最適。

2.  **`ttl_updater_service`** (難易度: ★☆☆☆☆)
    *   **役割**: DynamoDBのTTL（有効期限）を更新する、という非常に限定的な役割。
    *   **コード量**: 小
    *   **学習ポイント**: 特定のイベント（時間など）をトリガーに動作する、小規模なバッチ処理の典型例。

### 【ステップ2】 標準的なCRUDサービス (学習目安: 各2〜4時間)

次に、データベースとの基本的なやり取り（作成・読み取り・更新・削除）を行うサービスです。

3.  **`user_service`** (難易度: ★★☆☆☆) - **現在学習中**
    *   **役割**: ユーザー情報の管理。CRUD操作の基本が詰まっている。
    *   **コード量**: 中
    *   **学習ポイント**: Pydanticでのデータ定義、認証、基本的なDB操作など、多くのサービスの基礎となる要素を学べる。

4.  **`tree_service`** (難易度: ★★☆☆☆)
    *   **役割**: アプリのコア機能である「木」に関する情報管理。
    *   **コード量**: 中
    *   **学習ポイント**: `user_service`と似た構造を持つため、復習に最適。親子関係など、少し複雑なデータ構造を扱う練習になる。

5.  **`admin_service`** (難易度: ★★☆☆☆)
    *   **役割**: 管理者向けの機能を提供。
    *   **コード量**: 中
    *   **学習ポイント**: 通常のユーザーとは異なる「権限」の概念や、システム全体を操作するAPIの設計を学べる。

### 【ステップ3】 外部連携・非同期処理を含むサービス (学習目安: 各4〜8時間)

ここからは、外部サービスとの連携や、少し複雑な処理フローを持つサービスです。

6.  **`contact_service`** (難易度: ★★★☆☆)
    *   **役割**: お問い合わせフォームの処理。
    *   **コード量**: 中
    *   **学習ポイント**: ユーザーからの入力を受け取り、メール送信やSlack通知など、外部の通知サービスと連携する方法を学べる。

7.  **`notification_service`** (難易度: ★★★☆☆)
    *   **役割**: アプリ内の様々な通知（例：「いいね」されました）を管理・送信する。
    *   **コード量**: 大（内部構造が複雑）
    *   **学習ポイント**: 他の多くのサービスから呼び出される、共通基盤的なサービスの設計。様々な種類の通知をどう管理するかの設計パターン。

8.  **`webhook_service`** (難易度: ★★★★☆)
    *   **役割**: 外部サービスからの通知（Webhook）を受け取る窓口。特に決済サービスStripeとの連携。
    *   **コード量**: 大
    *   **学習ポイント**: **非同期処理**の塊。外部からのリクエストを一度受け付け（キューイング）、実際の処理は裏側でゆっくり行う、という高度な設計。セキュリティ要件も厳しい。

### 【ステップ4】 コアビジネスロジック・AI連携 (学習目安: 各8時間〜)

最も複雑で、このアプリケーションのビジネス価値の根幹をなすサービスです。

9.  **`billing_service`** (難易度: ★★★★☆)
    *   **役割**: 決済・請求処理。Stripeと連携し、ユーザーの課金プランなどを管理。
    *   **コード量**: 大
    *   **学習ポイント**: お金が絡むため、処理の正確性、エラーハンドリング、冪等性（べきとうせい：同じ操作を何度繰り返しても同じ結果になること）の担保など、非常に高度で厳密な設計が求められる。

10. **`chat_service`** (難易度: ★★★★★)
    *   **役割**: アプリのメイン機能であるAIとのチャット機能。
    *   **コード量**: 大
    *   **学習ポイント**: LangChainライブラリを使った生成AIとの連携、会話履歴の管理（Memory）、リアルタイムに近い応答性など、最先端で複雑な技術要素が詰まっている。
