# 開発環境構築手順書

## 概要
ほめびよりプロジェクトのローカル開発環境構築手順を記載します。

## 前提条件

### 必要なソフトウェア
- Node.js (v18以上推奨)
- npm または yarn
- Git

### 開発環境確認
```bash
node --version    # v18以上であることを確認
npm --version     # 最新版推奨
git --version     # 最新版推奨
```

## プロジェクト構成

```
homebiyori/
├── terraform/          # インフラストラクチャ定義
├── homebiyori-demo/     # ローカルデモアプリ（Next.js）
├── CLAUDE.md           # Claude Code向け指示書
├── DEV_SETUP.md        # 本ファイル
└── .kiro/specs/        # 仕様書
```

## 手順1: ローカルデモアプリの初期化

### Next.jsプロジェクト作成
```bash
# プロジェクトルートで実行
npx create-next-app@latest homebiyori-demo --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"
```

実行オプション詳細:
- `--typescript`: TypeScript有効化
- `--tailwind`: Tailwind CSS有効化  
- `--eslint`: ESLint有効化
- `--app`: App Router使用
- `--src-dir`: src/ディレクトリ構成
- `--import-alias "@/*"`: インポートエイリアス設定

### プロジェクト移動と依存関係インストール
```bash
cd homebiyori-demo
npm install  # 依存関係のインストール
```

## 手順2: 開発サーバー起動確認

```bash
npm run dev
```

ブラウザで http://localhost:3000 にアクセスしてNext.jsの初期画面が表示されることを確認。

**確認済み環境:**
- Next.js 15.4.3 (Turbopack)
- 起動時間: 約1.9秒
- ローカル: http://localhost:3000

## 手順3: 基本ディレクトリ構造作成

```bash
cd src
mkdir -p components/ui components/features lib types
```

作成されるディレクトリ構造:
```
src/
├── app/
├── components/
│   ├── ui/          # 基本UIコンポーネント
│   └── features/    # 機能別コンポーネント
├── lib/             # ユーティリティ関数
└── types/           # TypeScript型定義
```

## 手順4: 木の成長UIプロトタイプ確認

以下のコンポーネントが実装済み:
- `TreeGrowthDemo.tsx` - メインデモコンポーネント
- `FamilyTree.tsx` - 木のSVG表示コンポーネント  
- `PostButtons.tsx` - 投稿ボタンコンポーネント

**機能確認:**
- 年輪表示（育児日数45日でテスト）
- AIロール別の光る実（ピンク・青・金色）
- 実タップでメッセージ表示
- 投稿ボタンでの状態更新

## 手順5: アニメーションライブラリ追加

```bash
npm install framer-motion
```

## 手順6: インタラクション演出の確認

実装済みの演出機能:
- **FloatingMessage.tsx** - 実タップ時のふんわり浮遊演出
- **CelebrationOverlay.tsx** - 投稿時の「静かに喜ぶ」演出
- **LetterModal.tsx** - 初回投稿時の手紙演出
- **EnhancedFamilyTree.tsx** - 大幅に改良された木のUI

**演出確認手順:**
1. 光る実をタップ → 浮遊メッセージ表示
2. 投稿ボタンクリック → お祝い演出 → (初回のみ)手紙演出
3. 葉っぱが自然に風で揺れる

## 手順7: プロフェッショナルUIシステム実装

**ArtisticFamilyTree.tsx** - Canvas による美しい木のUI:
- **フラクタル樹木生成**: 数学的アルゴリズムによる自然な成長パターン  
- **リアルタイムアニメーション**: 風による葉の揺れ、枝の微細な動き
- **アーティスティック描画**: グラデーション、影、質感の詳細表現
- **プロシージャル生成**: 育児日数に応じた動的な枝・葉の配置
- **美しい色彩理論**: 自然な配色パレットによる調和の取れた表現
- **インタラクティブ**: 実のクリック判定とスムーズなアニメーション

**PremiumLayout.tsx** - プロフェッショナルなレイアウト:
- 時間帯に応じた動的グリーティング
- 高品質な背景エフェクトとノイズテクスチャ
- ガラスモーフィズムデザイン
- 洗練されたナビゲーション

**PremiumPostButtons.tsx** - 高品質なCTA:
- シマー効果とグロー演出
- インタラクティブなマイクロアニメーション
- プレミアムヒントカード

## 現在の課題と今後の改善予定

### 🚨 優先対応が必要な課題
- [ ] **木のUI品質向上** - より美しく自然な木の表現への改善（高優先度）
  - 現在SimplifiedCanvasTreeを使用中だが、デザイン品質が不十分
  - フラクタルアルゴリズムによる自然な成長パターンの実装
  - アーティスティックな色彩とテクスチャの向上
- [ ] Canvas描画パフォーマンス最適化
- [ ] 実のクリック判定精度向上

### 📋 今後追加予定
- [ ] ローカルストレージでの状態永続化
- [ ] 日付管理とカレンダー機能
- [ ] 褒めメッセージのバリエーション拡充
- [ ] 年輪成長アニメーション
- [ ] 実の成長過程アニメーション

---

**更新履歴**
- 2025-07-23: 初版作成、Next.jsプロジェクト初期化手順追加
- 2025-07-23: 基本ディレクトリ構造、木の成長UIプロトタイプ実装完了
- 2025-07-23: Framer Motion導入、インタラクション演出実装完了
- 2025-07-23: 木のUIブラッシュアップ、時間帯・季節演出追加完了
- 2025-07-23: プロフェッショナルUIシステム実装、デザイン品質大幅向上
- 2025-07-23: Canvas による美しい木のUI実装、アーティスティック品質実現
- 2025-07-23: Canvas表示問題修正、SimplifiedCanvasTreeへの切り替え
- 2025-07-23: 木のUI品質向上が優先課題として明確化、開発ステータス更新