# 実装計画

## フェーズ1: ローカルUI確認用デモアプリ（優先実装）

- [ ] 0. ローカルデモアプリ基盤構築
  - UI/UX確認用のシンプルなデモアプリを構築
  - 認証なしでローカル動作するモックアプリ
  - _目的: 木の成長UIコンセプトの早期検証_

- [ ] 0.1 Next.jsデモプロジェクト初期化
  - Next.js + TypeScript + Tailwind CSSの最小構成
  - ローカル開発環境のセットアップ
  - 基本的なページルーティング設定

- [ ] 0.2 木の成長UIプロトタイプ実装
  - SVGまたはCanvas使用の木の視覚表現
  - 年輪（日数）と実（褒め記録）のモック表示
  - AIロール別実の色分け表示

- [ ] 0.3 基本的なインタラクション実装
  - 実タップ時のふんわり浮遊演出
  - モック褒めメッセージの表示
  - 初回投稿時の手紙演出

- [ ] 0.4 投稿フォームプロトタイプ
  - シンプルな投稿フォーム
  - 投稿時の「静かに喜ぶ」演出
  - ローカルストレージでの状態保存

- [ ] 0.5 AIロール選択UI
  - 3つのキャラクター選択インターフェース
  - キャラクター毎の褒めメッセージサンプル表示

## フェーズ2: 本格実装（デモ検証後）

- [ ] 1. プロジェクト基盤構築
  - プロジェクトの基本構造とコア機能を設定
  - 必要なライブラリとツールをインストール
  - _要件: 全体_

- [ ] 1.1 フロントエンドプロジェクト初期化
  - Next.jsプロジェクトを作成（SSG/ISRモード）
  - TypeScriptとTailwind CSSを設定
  - 基本的なディレクトリ構造を作成
  - 静的ホスティング用の設定を追加
  - _要件: 全体_

- [ ] 1.2 バックエンドプロジェクト初期化
  - FastAPI + Lambda用プロジェクトを作成
  - Mangumアダプターを設定
  - Lambda Layersの構造を作成
  - 必要なパッケージをインストール
  - _要件: 全体_

- [ ] 1.3 共通型定義とインターフェース作成
  - フロントエンドとバックエンド間で共有する型定義を作成
  - APIエンドポイントのインターフェースを定義
  - _要件: 全体_

- [ ] 2. AIロール選択機能実装
  - 3つのAIキャラクターを選択できる機能を構築
  - _要件: 2.1, 2.2, 2.3_

- [ ] 2.1 AIロールモデルとAPI実装
  - AIロール設定を保存するAPIを実装
  - ロール選択状態を管理する機能を実装
  - _要件: 2.1, 2.2, 2.3_

- [ ] 2.2 AIロール選択UI実装
  - キャラクター選択画面を作成
  - 各キャラクターの特徴を視覚的に表現
  - 選択状態の保存と表示を実装
  - _要件: 2.1, 2.2, 2.3_

- [ ] 3. 投稿機能実装
  - テキストと画像の投稿機能を構築
  - _要件: 1.1, 1.2, 1.3_

- [ ] 3.1 投稿モデルとAPI実装
  - 投稿モデルを定義
  - テキスト投稿APIを実装
  - _要件: 1.1, 1.3_

- [ ] 3.2 画像アップロード機能実装
  - S3バケット設定
  - 画像アップロードAPIを実装
  - 画像最適化処理を実装
  - _要件: 1.2, 1.3_

- [ ] 3.3 投稿フォームUI実装
  - テキスト投稿フォームを作成
  - 画像アップロードインターフェースを実装
  - 投稿送信アニメーションを実装
  - _要件: 1.1, 1.2, 1.3_

- [ ] 4. AI褒め機能実装
  - Amazon Bedrockを使用したAI褒めメッセージ生成機能を構築
  - _要件: 1.1, 1.2, 1.4, 3.1, 3.2, 3.3, 3.4_

- [ ] 4.1 Bedrock APIクライアント実装
  - Amazon Bedrock APIクライアントを実装
  - プロンプトテンプレートを作成
  - _要件: 1.1, 1.2_

- [ ] 4.2 褒めレベル設定機能実装
  - 褒めレベル（ライト、スタンダード、ディープ）の設定APIを実装
  - レベルに応じたプロンプト生成ロジックを実装
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 4.3 AIロールに応じた褒め生成実装
  - 各AIキャラクターの特性に合わせたプロンプト調整を実装
  - キャラクターごとの応答スタイルを定義
  - _要件: 2.2_

- [ ] 4.4 褒めメッセージ表示UI実装
  - 手紙や箱を開けるような演出のアニメーションを実装
  - メッセージ表示コンポーネントを作成
  - _要件: 1.4_

- [ ] 5. ユーザープロフィール管理機能実装
  - ユーザー情報と子供の情報を管理する機能を構築
  - _要件: 5.3, 5.4, 5.5_

- [ ] 5.1 ユーザーモデルとAPI実装
  - ユーザーモデルを定義
  - プロフィール取得・更新APIを実装
  - _要件: 5.3, 5.4_

- [ ] 5.2 子供情報モデルとAPI実装
  - 子供情報モデルを定義
  - 子供情報のCRUD APIを実装
  - _要件: 5.3, 5.4_

- [ ] 5.3 プロフィール管理UI実装
  - ユーザープロフィール編集画面を作成
  - 子供情報管理インターフェースを実装
  - _要件: 5.3, 5.4, 5.5_

- [ ] 7. 努力の可視化機能実装（木の成長UI）
  - 木の成長UIで育児の努力を可視化する機能を構築
  - _要件: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6_

- [ ] 7.1 統計データモデルとAPI実装
  - 統計データモデルを定義
  - 育児日数カウントと年輪成長ロジックを実装
  - 褒め記録と実の生成ロジックを実装
  - _要件: 4.1, 4.2, 4.4_

- [ ] 7.2 木の成長UI実装
  - 木の視覚的表現を実装（幹、枝、葉、実）
  - 育児日数に応じた年輪成長アニメーションを実装
  - AIロール別の光る実表示を実装（たまさん：ピンク、まどか姉さん：青、ヒデじい：金色）
  - _要件: 4.1, 4.2, 4.3, 4.5_

- [ ] 7.3 実タップ時の演出実装
  - 実をタップした際のふんわり浮遊演出を実装
  - 褒めメッセージの空中表示アニメーションを実装
  - _要件: 4.3_

- [ ] 7.4 子供名前表示機能実装
  - 木の幹や根に子供の名前を刻む表示を実装
  - 複数子供対応の表示レイアウトを実装
  - _要件: 4.6_

- [ ] 8. レスポンシブデザイン実装
  - 様々なデバイスに対応するレスポンシブUIを実装
  - _要件: 7.1, 7.2, 7.3_

- [ ] 8.1 モバイル最適化UI実装
  - モバイルビューのレイアウトを実装
  - タッチ操作に最適化したインタラクションを実装
  - _要件: 7.1_

- [ ] 8.2 タブレット・デスクトップUI実装
  - タブレットとデスクトップ向けレイアウトを実装
  - 画面サイズに応じたコンポーネント配置を調整
  - _要件: 7.2, 7.3_

- [ ] 9. インフラストラクチャ構築
  - AWSリソースをTerraformで構築
  - _要件: 8.1, 8.2, 8.3, 8.4_

- [ ] 9.1 Terraformコード作成
  - API Gateway、Lambda、DynamoDB、S3などのリソース定義を実装
  - コスト最適化設定を適用
  - _要件: 8.1, 8.2, 8.3, 8.4_

- [ ] 9.2 CI/CDパイプライン構築
  - GitHub Actionsワークフローを設定
  - テスト・ビルド・デプロイプロセスを自動化
  - _要件: 全体_

- [ ] 9.3 WAFによるメンテナンスモード実装
  - WAFルールを使用したメンテナンスモード機能を実装
  - メンテナンス時の表示ページを作成
  - _要件: 全体_

- [ ] 10. 監視・ログ設定
  - New Relicによる監視とアラート設定を実装
  - _要件: 全体_

- [ ] 10.1 アプリケーション監視設定
  - New Relic APMとBrowser Agentを設定
  - パフォーマンス指標の収集を実装
  - _要件: 全体_

- [ ] 10.2 アラート設定
  - エラー率とレスポンス時間のアラートを設定
  - コスト超過アラートを設定
  - _要件: 8.1, 8.2, 8.3, 8.4_

## フェーズ3: 認証機能実装（デモ検証・UI確定後）

- [ ] 11. 認証機能実装
  - Amazon Cognitoを使用したユーザー認証システムを構築
  - _要件: 5.1, 5.2_

- [ ] 11.1 Cognito設定とセットアップ
  - Amazon Cognitoユーザープールを作成
  - Google OAuthプロバイダーを設定
  - _要件: 5.1, 5.2_

- [ ] 11.2 バックエンド認証ハンドラー実装
  - JWTトークン検証機能を実装
  - 認証ミドルウェアを作成
  - _要件: 5.1, 5.2_

- [ ] 11.3 フロントエンド認証UI実装
  - ログイン画面を作成
  - Googleログインボタンを実装
  - 認証状態管理を実装
  - _要件: 5.1, 5.2_

- [ ] 11.4 デモアプリから本格アプリへの移行
  - ローカルストレージからCloud環境への移行
  - 認証付きユーザーデータ管理への切り替え
  - セキュリティ機能の有効化